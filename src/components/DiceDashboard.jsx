import { useState } from "react";
import DiceButton from "./DiceButton";
import ResultDisplay from "./ResultDisplay";
import "./DiceDashboard.css";

const DiceDashboard = () => {
  const [currentResult, setCurrentResult] = useState(null);
  const [rollHistory, setRollHistory] = useState([]);

  // Tablas d100 para Aventura de SuperhÃ©roes en el Espacio
  const diceData = [
    {
      id: "scifi_nouns",
      name: "Sustantivos Sci-Fi",
      icon: "ðŸŒŒ",
      items: [
        "Nebulosa",
        "Asteroide",
        "Cometa",
        "Exoplaneta",
        "Galaxia",
        "CuÃ¡sar",
        "PÃºlsar",
        "Agujero",
        "Singularidad",
        "EstaciÃ³n",
        "Orbital",
        "Colonia",
        "HÃ¡bitat",
        "Sector",
        "BifurcaciÃ³n",
        "AnomalÃ­a",
        "Portal",
        "Hipereje",
        "Salto",
        "TÃºnel",
        "Ruta",
        "Senda",
        "VÃ­a",
        "Convergencia",
        "Divergencia",
        "Falla",
        "CÃ¡mara",
        "Nave",
        "MÃ³dulo",
        "CÃ¡psula",
        "Motor",
        "Reactor",
        "Propulsor",
        "Escudo",
        "Arma",
        "Sensor",
        "Consola",
        "Terminal",
        "Interfaz",
        "Dron",
        "Robot",
        "IA",
        "Ciborg",
        "Droide",
        "Unidad",
        "Muestra",
        "Cristal",
        "Mineral",
        "AleaciÃ³n",
        "Reliquia",
        "Artefacto",
        "Ruina",
        "Templo",
        "Glifo",
        "SÃ­mbolo",
        "CÃ³digo",
        "Datos",
        "Registro",
        "BitÃ¡cora",
        "Archivo",
        "Espectro",
        "Campo",
        "Onda",
        "EnergÃ­a",
        "RadiaciÃ³n",
        "PartÃ­cula",
        "Materia",
        "Antimateria",
        "VÃ³rtice",
        "Grieta",
        "ErupciÃ³n",
        "Pulso",
        "Resonancia",
        "Eco",
        "SeÃ±al",
        "Mensaje",
        "Advertencia",
        "Amenaza",
        "Criatura",
        "Especie",
        "Forma",
        "Entidad",
        "CivilizaciÃ³n",
        "Imperio",
        "FederaciÃ³n",
        "Alianza",
        "Conflicto",
        "Guerra",
        "Paz",
        "Tratado",
        "Acuerdo",
        "MisiÃ³n",
        "Objetivo",
        "Descubrimiento",
        "Hallazgo",
        "Recompensa",
        "Peligro",
        "DesafÃ­o",
        "SoluciÃ³n",
        "Elemento"
      ]
    },
    {
      id: "ship_events",
      name: "Eventos en la Nave",
      icon: "ï¿½",
      items: [
        "Fallo en el motor principal",
        "DespresurizaciÃ³n de un compartimento",
        "Tormenta de radiaciÃ³n solar",
        "Ataque de piratas espaciales",
        "Impacto de micrometeorito",
        "Fallo en el soporte vital",
        "Intruso a bordo",
        "Mal funcionamiento del sistema de navegaciÃ³n",
        "Cortocircuito generalizado",
        "ExplosiÃ³n en la sala de mÃ¡quinas",
        "ComunicaciÃ³n interrumpida",
        "Error en el replicador de alimentos",
        "Enjambre de insectos cÃ³smicos",
        "IA de la nave se vuelve errÃ¡tica",
        "SeÃ±al de socorro falsa",
        "Despertar de un pasajero en estasis",
        "Virus informÃ¡tico alienÃ­gena",
        "El supercombustible reacciona",
        "Gravedad fluctuante",
        "Fallo en los escudos defensores",
        "ApariciÃ³n de un fantasma espacial",
        "Compuerta de carga se abre accidentalmente",
        "Sistema de contenciÃ³n falla",
        "Robot de servicio se rebela",
        "FiltraciÃ³n de agua reciclada",
        "Las luces parpadean incesantemente",
        "Ruido misterioso en el casco",
        "Piloto automÃ¡tico se desconecta",
        "Fallo en la climatizaciÃ³n",
        "Consumo excesivo de energÃ­a",
        "Nave entra en un campo de escombros",
        "Un miembro sufre una pesadilla lÃºcida",
        "Sistemas de seguridad se bloquean",
        "DetecciÃ³n de una nave oculta cercana",
        "Un objeto personal se pierde",
        "Las cÃ¡maras de vigilancia se oscurecen",
        "Una planta muta a bordo",
        "Un portal dimensional se abre brevemente",
        "ApariciÃ³n de un temporal espacial",
        "Bomba de tiempo oculta",
        "La nave es remolcada",
        "Fallo en los inyectores de plasma",
        "Residuos tÃ³xicos se liberan",
        "Una ilusiÃ³n Ã³ptica afecta a la tripulaciÃ³n",
        "Sistemas de teletransporte se activan solos",
        "Mascota de la nave se vuelve salvaje",
        "Fallo en los propulsores de maniobra",
        "Una sustancia pegajosa cubre un Ã¡rea",
        "Un holograma errante aparece",
        "Los sistemas de defensa apuntan a la propia nave",
        "Fallo en el reciclador de aire",
        "Sensores detectan vida a bordo",
        "La nave se congela gradualmente",
        "Sistemas de comunicaciÃ³n reciben una canciÃ³n extraÃ±a",
        "Se rompe una tuberÃ­a principal",
        "La computadora de la nave pide ayuda",
        "Un mÃ³dulo se desprende parcialmente",
        "Cristales extraÃ±os crecen en el casco",
        "Una criatura espacial se adhiere a la nave",
        "Los controles de la nave se invierten",
        "El campo de fuerza de la bodega falla",
        "Luces estroboscÃ³picas incontrolables",
        "Sistemas de armas se activan por sÃ­ solos",
        "Un miembro del equipo enferma de repente",
        "La nave entra en un campo de partÃ­culas desconocidas",
        "La presiÃ³n arterial de la tripulaciÃ³n sube",
        "Se escuchan susurros en los conductos",
        "Un experimento cientÃ­fico a bordo sale mal",
        "La nave es arrastrada por una corriente cÃ³smica",
        "Fallo en los propulsores de atraque",
        "Un objeto levita dentro de la nave",
        "Los escÃ¡neres detectan un ser dentro de un muro",
        "El generador de gravedad falla en una secciÃ³n",
        "Una luz brillante inunda la nave",
        "Fuga de un gas adormecedor",
        "Se activa un sistema de defensa antiguo",
        "Una visiÃ³n apocalÃ­ptica se proyecta",
        "Los nanobots de mantenimiento se vuelven locos",
        "Se detecta una nave idÃ©ntica",
        "La nave empieza a emitir un campo estÃ¡tico",
        "Alguien deja una nota de advertencia crÃ­ptica",
        "Fallo en los inhibidores de poder",
        "Un dispositivo de camuflaje se activa aleatoriamente",
        "Una grieta temporal se abre",
        "Se pierde el control de los drones",
        "La nave se convierte en un imÃ¡n",
        "Una anomalÃ­a energÃ©tica hace que los sueÃ±os se hagan realidad",
        "Los sistemas de compresiÃ³n de basura se desbordan",
        "Un replicador de objetos crea duplicados imperfectos",
        "La IA de la nave pide un favor inusual",
        "Un haz de energÃ­a desconocido golpea la nave",
        "Se activa un sistema de clonaciÃ³n experimental",
        "El suministro de agua se contamina",
        "Se activa un campo de distorsiÃ³n del sonido",
        "La nave queda atrapada en una red de energÃ­a alienÃ­gena",
        "Un cargamento de armas exÃ³ticas se activa",
        "La nave empieza a cantar",
        "Un artefacto a bordo se activa solo",
        "Las luces de la nave cambian de color",
        "La nave se desvÃ­a a una dimensiÃ³n espejo"
      ]
    },
    {
      id: "discoveries",
      name: "Descubrimientos",
      icon: "ðŸ”",
      items: [
        "Restos de una megaciudad alienÃ­gena",
        "Una biosfera artificial gigante",
        "Un cementerio de naves espaciales",
        "Una estaciÃ³n de investigaciÃ³n cientÃ­fica oculta",
        "Un planeta cubierto de hielo",
        "Un asteroide hueco",
        "Una nebulosa de colores vibrantes",
        "Un puesto de avanzada de la Tierra olvidado",
        "Un planeta con una atmÃ³sfera de gas tÃ³xico",
        "La fuente del supercombustible",
        "Un agujero de gusano inestable",
        "Una biblioteca galÃ¡ctica antigua",
        "Un planeta volcÃ¡nico",
        "Una prisiÃ³n de mÃ¡xima seguridad alienÃ­gena",
        "Un satÃ©lite artificial que emite mÃºsica",
        "Los restos de una batalla estelar masiva",
        "Un planeta con una civilizaciÃ³n primitiva",
        "Una zona del espacio donde el tiempo se ralentiza",
        "Una nave espacial de exploraciÃ³n estrellada",
        "Un planeta desierto",
        "Un vivero espacial gigante",
        "Una anomalÃ­a espacial que duplica objetos",
        "Un planeta oceÃ¡nico",
        "Un puesto de observaciÃ³n secreto",
        "Un sistema estelar binario",
        "Una esfera Dyson incompleta",
        "Un campo de escombros de una estaciÃ³n espacial",
        "Un planeta con tecnologÃ­a que interactÃºa con las mentes",
        "Una zona de silencio espacial",
        "La fuente del supercombustible en un nido",
        "Una colonia humana renegada",
        "Un planeta con una atmÃ³sfera que modifica los poderes",
        "Un cinturÃ³n de asteroides con una densidad de vida increÃ­ble",
        "Un sistema planetario con planetas gigantes gaseosos",
        "Un planeta con una Ãºnica especie dominante",
        "Una nave de investigaciÃ³n abandonada",
        "Un agujero negro errante",
        "Un planeta que es una Ãºnica y gigantesca forma de vida",
        "Una fÃ¡brica automatizada alienÃ­gena",
        "La fuente del supercombustible en una anomalÃ­a temporal",
        "Un santuario de una religiÃ³n alienÃ­gena",
        "Un planeta con clima impredecible",
        "Una base de contrabando intergalÃ¡ctico",
        "Un planetoide que es en realidad un huevo gigante",
        "Un campo de fuerza invisible",
        "Una zona del espacio llena de ilusiones",
        "Un planeta con una red subterrÃ¡nea de tÃºneles",
        "Los restos de un coloso espacial",
        "Un planeta que emite una frecuencia extraÃ±a",
        "La fuente del supercombustible dentro de una criatura espacial",
        "Una colonia minera enloquecida",
        "Un campo de asteroides con trampas",
        "Un planeta con ciudades flotantes",
        "Una nave prisiÃ³n a la deriva",
        "Un sistema solar con solo un planeta",
        "Un nido de naves alienÃ­genas dormidas",
        "Un planeta con una anomalÃ­a gravitacional",
        "Una seÃ±al de radio antigua",
        "Un templo alienÃ­gena sumergido",
        "La fuente del supercombustible en un volcÃ¡n activo",
        "Un campo de energÃ­a que desactiva la tecnologÃ­a",
        "Un planeta con una especie que absorbe energÃ­a",
        "Un Ã¡rea del espacio con fragmentos de planetas",
        "Una estaciÃ³n de servicio de naves",
        "Un planeta con una flora que emite gases alucinÃ³genos",
        "Un mercado negro espacial flotante",
        "Un planeta que es un gigantesco cerebro",
        "Una burbuja de realidad alternativa",
        "Una civilizaciÃ³n alienÃ­gena en guerra civil",
        "La fuente del supercombustible en un sol moribundo",
        "Un planeta con un guardiÃ¡n robÃ³tico",
        "Un oasis espacial",
        "Un planeta que cambia de forma",
        "Una nave arca que transporta especies extintas",
        "Un Ã¡rea del espacio donde los colores se distorsionan",
        "Un planeta donde la tecnologÃ­a no funciona",
        "Una fÃ¡brica de drones descontrolada",
        "Un planeta habitado por sombras",
        "Un sistema de agujeros negros interconectados",
        "La fuente del supercombustible en un plano etÃ©reo",
        "Un laboratorio de experimentaciÃ³n genÃ©tica",
        "Un planeta que es una trampa de un depredador gigante",
        "Un portal antiguo que lleva a una galaxia lejana",
        "Una estaciÃ³n de retransmisiÃ³n de emergencia",
        "Un campo de minas espaciales activas",
        "Un planeta con estructuras cristalinas gigantes",
        "Una nave espacial legendaria o mÃ­tica",
        "Un planeta con una flora que se alimenta de metales",
        "Un campo de energÃ­a que causa amnesia",
        "La fuente del supercombustible es un ser vivo",
        "Una ciudad bajo la superficie de un planeta",
        "Un planeta que es una simulaciÃ³n perfecta",
        "Una zona del espacio donde los poderes no funcionan",
        "Un monumento flotante a una civilizaciÃ³n perdida",
        "Un planeta con una inteligencia colectiva",
        "Una baliza de emergencia antigua",
        "Un planeta con una atmÃ³sfera que amplifica el sonido",
        "Una anomalÃ­a que fusiona dos realidades",
        "Un campo de entrenamiento de superhÃ©roes encubierto",
        "La fuente del supercombustible es una parte del universo"
      ]
    },
    {
      id: "obstacles",
      name: "ObstÃ¡culos",
      icon: "âš ï¸",
      items: [
        "Bloqueo militar",
        "Trampa mortal",
        "Falla del equipo crucial",
        "Enigma ancestral",
        "Criatura guardian",
        "Entorno hostil",
        "Falta de recursos",
        "Rivalidad de facciones",
        "Tiempo limitado",
        "Dilema moral",
        "Virus informÃ¡tico",
        "Desactivar un sistema de seguridad",
        "NegociaciÃ³n difÃ­cil",
        "PersecuciÃ³n incesante",
        "Campo de fuerza impenetrable",
        "Un aliado se convierte en enemigo",
        "Un experimento cientÃ­fico descontrolado",
        "El elemento es inestable",
        "Rescate de rehenes",
        "Desactivar una bomba",
        "Prueba de fe o valor",
        "Interferencia de poderes",
        "Zona de silencio tecnolÃ³gico",
        "EngaÃ±o o ilusiÃ³n",
        "Caza de reliquias",
        "Sabotaje interno",
        "Meteoros en trayectoria de colisiÃ³n",
        "Un laberinto espacial",
        "Necesidad de un sacrificio",
        "El elemento es consciente",
        "Control mental",
        "Un evento gravitacional anÃ³malo",
        "Desactivar un campo de camuflaje",
        "Prueba de habilidad",
        "El objetivo estÃ¡ en un lugar inaccesible",
        "Pistas crÃ­pticas",
        "Una enfermedad o plaga alienÃ­gena",
        "Un guardiÃ¡n invulnerable",
        "El elemento es un ser vivo",
        "TraiciÃ³n de un aliado",
        "Un campo de energÃ­a que invierte los poderes",
        "La nave es arrastrada por un rayo tractor",
        "Un cÃ³digo genÃ©tico necesario",
        "El entorno cambia constantemente",
        "Un sistema de drones defensivos",
        "Una tormenta electromagnÃ©tica",
        "La criatura que buscÃ¡is es invisible",
        "Una zona de gravedad cero controlada",
        "El elemento es una trampa",
        "Una profecÃ­a oscura",
        "Resistencia de la poblaciÃ³n local",
        "Un temporal de arena cÃ³smica",
        "Falla en el sistema de camuflaje de la nave",
        "Un sistema de trampas de sonido",
        "El elemento es un duplicado",
        "Un campo de mutaciÃ³n espontÃ¡nea",
        "Necesidad de un ritual o ceremonia",
        "Una civilizaciÃ³n que vive en el vacÃ­o",
        "El elemento es un parÃ¡sito",
        "Un laberinto de espejos distorsionadores",
        "Un volcÃ¡n espacial entra en erupciÃ³n",
        "Los sistemas de soporte vital fallan",
        "Un campo de estÃ¡tica psÃ­quica",
        "La nave estÃ¡ siendo drenada de energÃ­a",
        "Un portal se abre y libera criaturas",
        "El objetivo requiere una fuerza especÃ­fica",
        "Una cadena montaÃ±osa de cristal",
        "La gravedad del planeta es extrema",
        "Una criatura gigante os persigue",
        "El elemento estÃ¡ protegido por un sistema ancestral",
        "Una nube de nanobots hostiles",
        "Un dilema Ã©tico con androides",
        "El objetivo estÃ¡ en el centro de un nido de asteroides",
        "Necesidad de viajar en el tiempo",
        "Un ser cÃ³smico os pone a prueba",
        "El elemento requiere una resonancia especÃ­fica",
        "Una enfermedad que afecta a la percepciÃ³n",
        "Un campo de distorsiÃ³n espacial",
        "Los escÃ¡neres estÃ¡n enloquecidos",
        "El elemento estÃ¡ fusionado con un ser vivo",
        "Una red de cables de energÃ­a mortales",
        "El planeta se desestabiliza",
        "Un culto alienÃ­gena adora el elemento",
        "Una zona con radiaciÃ³n que anula los poderes",
        "Se activa un sistema de teletransporte fallido",
        "El objetivo estÃ¡ sumergido en un ocÃ©ano cÃ¡ustico",
        "Una barrera de tiempo",
        "Los robots de mantenimiento se vuelven hostiles",
        "El elemento atrae a una criatura gigante",
        "Necesidad de un sacrificio heroico",
        "Un campo de asteroides con vida propia",
        "El elemento se ha integrado en un ecosistema",
        "Una mÃ¡quina de guerra antigua se activa",
        "Un campo de sonido que paraliza",
        "La memoria de un miembro se borra",
        "El elemento estÃ¡ en un universo de bolsillo",
        "Una entidad cÃ³smica os observa",
        "Un engaÃ±o complejo",
        "Los poderes de los hÃ©roes son drenados",
        "El elemento es el propio destino"
      ]
    }
  ];

  const handleDiceRoll = (diceName, result, sides) => {
    const newResult = {
      diceName,
      result,
      sides,
      timestamp: new Date().toLocaleTimeString()
    };

    setCurrentResult(newResult);
    setRollHistory((prev) => [newResult, ...prev.slice(0, 4)]); // Mantener solo los Ãºltimos 5 resultados
  };

  return (
    <div className="dice-dashboard">
      <ResultDisplay currentResult={currentResult} />

      <div className="dice-grid">
        {diceData.map((dice) => (
          <DiceButton
            key={dice.id}
            name={dice.name}
            icon={dice.icon}
            items={dice.items}
            onRoll={handleDiceRoll}
          />
        ))}
      </div>

      {rollHistory.length > 0 && (
        <div className="roll-history">
          <h3>Ãšltimos resultados</h3>
          <div className="history-list">
            {rollHistory.map((roll, index) => (
              <div key={index} className="history-item">
                <span className="history-dice">{roll.diceName}</span>
                <span className="history-result">{roll.result}</span>
                <span className="history-time">{roll.timestamp}</span>
              </div>
            ))}
          </div>
        </div>
      )}
    </div>
  );
};

export default DiceDashboard;
