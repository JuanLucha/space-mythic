import { useState } from "react";
import DiceButton from "./DiceButton";
import ResultDisplay from "./ResultDisplay";
import "./DiceDashboard.css";

const DiceDashboard = () => {
  const [currentResult, setCurrentResult] = useState(null);
  const [rollHistory, setRollHistory] = useState([]);

  // Tablas d100 para Aventura de Superh√©roes en el Espacio
  const diceData = [
    {
      id: "scifi_nouns",
      name: "Sustantivos Sci-Fi",
      icon: "üåå",
      items: [
        "Nebulosa",
        "Asteroide",
        "Cometa",
        "Exoplaneta",
        "Galaxia",
        "Cu√°sar",
        "P√∫lsar",
        "Agujero",
        "Singularidad",
        "Estaci√≥n",
        "Orbital",
        "Colonia",
        "H√°bitat",
        "Sector",
        "Bifurcaci√≥n",
        "Anomal√≠a",
        "Portal",
        "Hipereje",
        "Salto",
        "T√∫nel",
        "Ruta",
        "Senda",
        "V√≠a",
        "Convergencia",
        "Divergencia",
        "Falla",
        "C√°mara",
        "Nave",
        "M√≥dulo",
        "C√°psula",
        "Motor",
        "Reactor",
        "Propulsor",
        "Escudo",
        "Arma",
        "Sensor",
        "Consola",
        "Terminal",
        "Interfaz",
        "Dron",
        "Robot",
        "IA",
        "Ciborg",
        "Droide",
        "Unidad",
        "Muestra",
        "Cristal",
        "Mineral",
        "Aleaci√≥n",
        "Reliquia",
        "Artefacto",
        "Ruina",
        "Templo",
        "Glifo",
        "S√≠mbolo",
        "C√≥digo",
        "Datos",
        "Registro",
        "Bit√°cora",
        "Archivo",
        "Espectro",
        "Campo",
        "Onda",
        "Energ√≠a",
        "Radiaci√≥n",
        "Part√≠cula",
        "Materia",
        "Antimateria",
        "V√≥rtice",
        "Grieta",
        "Erupci√≥n",
        "Pulso",
        "Resonancia",
        "Eco",
        "Se√±al",
        "Mensaje",
        "Advertencia",
        "Amenaza",
        "Criatura",
        "Especie",
        "Forma",
        "Entidad",
        "Civilizaci√≥n",
        "Imperio",
        "Federaci√≥n",
        "Alianza",
        "Conflicto",
        "Guerra",
        "Paz",
        "Tratado",
        "Acuerdo",
        "Misi√≥n",
        "Objetivo",
        "Descubrimiento",
        "Hallazgo",
        "Recompensa",
        "Peligro",
        "Desaf√≠o",
        "Soluci√≥n",
        "Elemento"
      ]
    },
    {
      id: "ship_events",
      name: "Eventos en la Nave",
      icon: "ÔøΩ",
      items: [
        "Fallo en el motor principal",
        "Despresurizaci√≥n de un compartimento",
        "Tormenta de radiaci√≥n solar",
        "Ataque de piratas espaciales",
        "Impacto de micrometeorito",
        "Fallo en el soporte vital",
        "Intruso a bordo",
        "Mal funcionamiento del sistema de navegaci√≥n",
        "Cortocircuito generalizado",
        "Explosi√≥n en la sala de m√°quinas",
        "Comunicaci√≥n interrumpida",
        "Error en el replicador de alimentos",
        "Enjambre de insectos c√≥smicos",
        "IA de la nave se vuelve err√°tica",
        "Se√±al de socorro falsa",
        "Despertar de un pasajero en estasis",
        "Virus inform√°tico alien√≠gena",
        "El supercombustible reacciona",
        "Gravedad fluctuante",
        "Fallo en los escudos defensores",
        "Aparici√≥n de un fantasma espacial",
        "Compuerta de carga se abre accidentalmente",
        "Sistema de contenci√≥n falla",
        "Robot de servicio se rebela",
        "Filtraci√≥n de agua reciclada",
        "Las luces parpadean incesantemente",
        "Ruido misterioso en el casco",
        "Piloto autom√°tico se desconecta",
        "Fallo en la climatizaci√≥n",
        "Consumo excesivo de energ√≠a",
        "Nave entra en un campo de escombros",
        "Un miembro sufre una pesadilla l√∫cida",
        "Sistemas de seguridad se bloquean",
        "Detecci√≥n de una nave oculta cercana",
        "Un objeto personal se pierde",
        "Las c√°maras de vigilancia se oscurecen",
        "Una planta muta a bordo",
        "Un portal dimensional se abre brevemente",
        "Aparici√≥n de un temporal espacial",
        "Bomba de tiempo oculta",
        "La nave es remolcada",
        "Fallo en los inyectores de plasma",
        "Residuos t√≥xicos se liberan",
        "Una ilusi√≥n √≥ptica afecta a la tripulaci√≥n",
        "Sistemas de teletransporte se activan solos",
        "Mascota de la nave se vuelve salvaje",
        "Fallo en los propulsores de maniobra",
        "Una sustancia pegajosa cubre un √°rea",
        "Un holograma errante aparece",
        "Los sistemas de defensa apuntan a la propia nave",
        "Fallo en el reciclador de aire",
        "Sensores detectan vida a bordo",
        "La nave se congela gradualmente",
        "Sistemas de comunicaci√≥n reciben una canci√≥n extra√±a",
        "Se rompe una tuber√≠a principal",
        "La computadora de la nave pide ayuda",
        "Un m√≥dulo se desprende parcialmente",
        "Cristales extra√±os crecen en el casco",
        "Una criatura espacial se adhiere a la nave",
        "Los controles de la nave se invierten",
        "El campo de fuerza de la bodega falla",
        "Luces estrobosc√≥picas incontrolables",
        "Sistemas de armas se activan por s√≠ solos",
        "Un miembro del equipo enferma de repente",
        "La nave entra en un campo de part√≠culas desconocidas",
        "La presi√≥n arterial de la tripulaci√≥n sube",
        "Se escuchan susurros en los conductos",
        "Un experimento cient√≠fico a bordo sale mal",
        "La nave es arrastrada por una corriente c√≥smica",
        "Fallo en los propulsores de atraque",
        "Un objeto levita dentro de la nave",
        "Los esc√°neres detectan un ser dentro de un muro",
        "El generador de gravedad falla en una secci√≥n",
        "Una luz brillante inunda la nave",
        "Fuga de un gas adormecedor",
        "Se activa un sistema de defensa antiguo",
        "Una visi√≥n apocal√≠ptica se proyecta",
        "Los nanobots de mantenimiento se vuelven locos",
        "Se detecta una nave id√©ntica",
        "La nave empieza a emitir un campo est√°tico",
        "Alguien deja una nota de advertencia cr√≠ptica",
        "Fallo en los inhibidores de poder",
        "Un dispositivo de camuflaje se activa aleatoriamente",
        "Una grieta temporal se abre",
        "Se pierde el control de los drones",
        "La nave se convierte en un im√°n",
        "Una anomal√≠a energ√©tica hace que los sue√±os se hagan realidad",
        "Los sistemas de compresi√≥n de basura se desbordan",
        "Un replicador de objetos crea duplicados imperfectos",
        "La IA de la nave pide un favor inusual",
        "Un haz de energ√≠a desconocido golpea la nave",
        "Se activa un sistema de clonaci√≥n experimental",
        "El suministro de agua se contamina",
        "Se activa un campo de distorsi√≥n del sonido",
        "La nave queda atrapada en una red de energ√≠a alien√≠gena",
        "Un cargamento de armas ex√≥ticas se activa",
        "La nave empieza a cantar",
        "Un artefacto a bordo se activa solo",
        "Las luces de la nave cambian de color",
        "La nave se desv√≠a a una dimensi√≥n espejo"
      ]
    },
    {
      id: "discoveries",
      name: "Descubrimientos",
      icon: "üîç",
      items: [
        "Restos de una megaciudad alien√≠gena",
        "Una biosfera artificial gigante",
        "Un cementerio de naves espaciales",
        "Una estaci√≥n de investigaci√≥n cient√≠fica oculta",
        "Un planeta cubierto de hielo",
        "Un asteroide hueco",
        "Una nebulosa de colores vibrantes",
        "Un puesto de avanzada de la Tierra olvidado",
        "Un planeta con una atm√≥sfera de gas t√≥xico",
        "La fuente del supercombustible",
        "Un agujero de gusano inestable",
        "Una biblioteca gal√°ctica antigua",
        "Un planeta volc√°nico",
        "Una prisi√≥n de m√°xima seguridad alien√≠gena",
        "Un sat√©lite artificial que emite m√∫sica",
        "Los restos de una batalla estelar masiva",
        "Un planeta con una civilizaci√≥n primitiva",
        "Una zona del espacio donde el tiempo se ralentiza",
        "Una nave espacial de exploraci√≥n estrellada",
        "Un planeta desierto",
        "Un vivero espacial gigante",
        "Una anomal√≠a espacial que duplica objetos",
        "Un planeta oce√°nico",
        "Un puesto de observaci√≥n secreto",
        "Un sistema estelar binario",
        "Una esfera Dyson incompleta",
        "Un campo de escombros de una estaci√≥n espacial",
        "Un planeta con tecnolog√≠a que interact√∫a con las mentes",
        "Una zona de silencio espacial",
        "La fuente del supercombustible en un nido",
        "Una colonia humana renegada",
        "Un planeta con una atm√≥sfera que modifica los poderes",
        "Un cintur√≥n de asteroides con una densidad de vida incre√≠ble",
        "Un sistema planetario con planetas gigantes gaseosos",
        "Un planeta con una √∫nica especie dominante",
        "Una nave de investigaci√≥n abandonada",
        "Un agujero negro errante",
        "Un planeta que es una √∫nica y gigantesca forma de vida",
        "Una f√°brica automatizada alien√≠gena",
        "La fuente del supercombustible en una anomal√≠a temporal",
        "Un santuario de una religi√≥n alien√≠gena",
        "Un planeta con clima impredecible",
        "Una base de contrabando intergal√°ctico",
        "Un planetoide que es en realidad un huevo gigante",
        "Un campo de fuerza invisible",
        "Una zona del espacio llena de ilusiones",
        "Un planeta con una red subterr√°nea de t√∫neles",
        "Los restos de un coloso espacial",
        "Un planeta que emite una frecuencia extra√±a",
        "La fuente del supercombustible dentro de una criatura espacial",
        "Una colonia minera enloquecida",
        "Un campo de asteroides con trampas",
        "Un planeta con ciudades flotantes",
        "Una nave prisi√≥n a la deriva",
        "Un sistema solar con solo un planeta",
        "Un nido de naves alien√≠genas dormidas",
        "Un planeta con una anomal√≠a gravitacional",
        "Una se√±al de radio antigua",
        "Un templo alien√≠gena sumergido",
        "La fuente del supercombustible en un volc√°n activo",
        "Un campo de energ√≠a que desactiva la tecnolog√≠a",
        "Un planeta con una especie que absorbe energ√≠a",
        "Un √°rea del espacio con fragmentos de planetas",
        "Una estaci√≥n de servicio de naves",
        "Un planeta con una flora que emite gases alucin√≥genos",
        "Un mercado negro espacial flotante",
        "Un planeta que es un gigantesco cerebro",
        "Una burbuja de realidad alternativa",
        "Una civilizaci√≥n alien√≠gena en guerra civil",
        "La fuente del supercombustible en un sol moribundo",
        "Un planeta con un guardi√°n rob√≥tico",
        "Un oasis espacial",
        "Un planeta que cambia de forma",
        "Una nave arca que transporta especies extintas",
        "Un √°rea del espacio donde los colores se distorsionan",
        "Un planeta donde la tecnolog√≠a no funciona",
        "Una f√°brica de drones descontrolada",
        "Un planeta habitado por sombras",
        "Un sistema de agujeros negros interconectados",
        "La fuente del supercombustible en un plano et√©reo",
        "Un laboratorio de experimentaci√≥n gen√©tica",
        "Un planeta que es una trampa de un depredador gigante",
        "Un portal antiguo que lleva a una galaxia lejana",
        "Una estaci√≥n de retransmisi√≥n de emergencia",
        "Un campo de minas espaciales activas",
        "Un planeta con estructuras cristalinas gigantes",
        "Una nave espacial legendaria o m√≠tica",
        "Un planeta con una flora que se alimenta de metales",
        "Un campo de energ√≠a que causa amnesia",
        "La fuente del supercombustible es un ser vivo",
        "Una ciudad bajo la superficie de un planeta",
        "Un planeta que es una simulaci√≥n perfecta",
        "Una zona del espacio donde los poderes no funcionan",
        "Un monumento flotante a una civilizaci√≥n perdida",
        "Un planeta con una inteligencia colectiva",
        "Una baliza de emergencia antigua",
        "Un planeta con una atm√≥sfera que amplifica el sonido",
        "Una anomal√≠a que fusiona dos realidades",
        "Un campo de entrenamiento de superh√©roes encubierto",
        "La fuente del supercombustible es una parte del universo"
      ]
    },
    {
      id: "obstacles",
      name: "Obst√°culos",
      icon: "‚ö†Ô∏è",
      items: [
        "Bloqueo militar",
        "Trampa mortal",
        "Falla del equipo crucial",
        "Enigma ancestral",
        "Criatura guardian",
        "Entorno hostil",
        "Falta de recursos",
        "Rivalidad de facciones",
        "Tiempo limitado",
        "Dilema moral",
        "Virus inform√°tico",
        "Desactivar un sistema de seguridad",
        "Negociaci√≥n dif√≠cil",
        "Persecuci√≥n incesante",
        "Campo de fuerza impenetrable",
        "Un aliado se convierte en enemigo",
        "Un experimento cient√≠fico descontrolado",
        "El elemento es inestable",
        "Rescate de rehenes",
        "Desactivar una bomba",
        "Prueba de fe o valor",
        "Interferencia de poderes",
        "Zona de silencio tecnol√≥gico",
        "Enga√±o o ilusi√≥n",
        "Caza de reliquias",
        "Sabotaje interno",
        "Meteoros en trayectoria de colisi√≥n",
        "Un laberinto espacial",
        "Necesidad de un sacrificio",
        "El elemento es consciente",
        "Control mental",
        "Un evento gravitacional an√≥malo",
        "Desactivar un campo de camuflaje",
        "Prueba de habilidad",
        "El objetivo est√° en un lugar inaccesible",
        "Pistas cr√≠pticas",
        "Una enfermedad o plaga alien√≠gena",
        "Un guardi√°n invulnerable",
        "El elemento es un ser vivo",
        "Traici√≥n de un aliado",
        "Un campo de energ√≠a que invierte los poderes",
        "La nave es arrastrada por un rayo tractor",
        "Un c√≥digo gen√©tico necesario",
        "El entorno cambia constantemente",
        "Un sistema de drones defensivos",
        "Una tormenta electromagn√©tica",
        "La criatura que busc√°is es invisible",
        "Una zona de gravedad cero controlada",
        "El elemento es una trampa",
        "Una profec√≠a oscura",
        "Resistencia de la poblaci√≥n local",
        "Un temporal de arena c√≥smica",
        "Falla en el sistema de camuflaje de la nave",
        "Un sistema de trampas de sonido",
        "El elemento es un duplicado",
        "Un campo de mutaci√≥n espont√°nea",
        "Necesidad de un ritual o ceremonia",
        "Una civilizaci√≥n que vive en el vac√≠o",
        "El elemento es un par√°sito",
        "Un laberinto de espejos distorsionadores",
        "Un volc√°n espacial entra en erupci√≥n",
        "Los sistemas de soporte vital fallan",
        "Un campo de est√°tica ps√≠quica",
        "La nave est√° siendo drenada de energ√≠a",
        "Un portal se abre y libera criaturas",
        "El objetivo requiere una fuerza espec√≠fica",
        "Una cadena monta√±osa de cristal",
        "La gravedad del planeta es extrema",
        "Una criatura gigante os persigue",
        "El elemento est√° protegido por un sistema ancestral",
        "Una nube de nanobots hostiles",
        "Un dilema √©tico con androides",
        "El objetivo est√° en el centro de un nido de asteroides",
        "Necesidad de viajar en el tiempo",
        "Un ser c√≥smico os pone a prueba",
        "El elemento requiere una resonancia espec√≠fica",
        "Una enfermedad que afecta a la percepci√≥n",
        "Un campo de distorsi√≥n espacial",
        "Los esc√°neres est√°n enloquecidos",
        "El elemento est√° fusionado con un ser vivo",
        "Una red de cables de energ√≠a mortales",
        "El planeta se desestabiliza",
        "Un culto alien√≠gena adora el elemento",
        "Una zona con radiaci√≥n que anula los poderes",
        "Se activa un sistema de teletransporte fallido",
        "El objetivo est√° sumergido en un oc√©ano c√°ustico",
        "Una barrera de tiempo",
        "Los robots de mantenimiento se vuelven hostiles",
        "El elemento atrae a una criatura gigante",
        "Necesidad de un sacrificio heroico",
        "Un campo de asteroides con vida propia",
        "El elemento se ha integrado en un ecosistema",
        "Una m√°quina de guerra antigua se activa",
        "Un campo de sonido que paraliza",
        "La memoria de un miembro se borra",
        "El elemento est√° en un universo de bolsillo",
        "Una entidad c√≥smica os observa",
        "Un enga√±o complejo",
        "Los poderes de los h√©roes son drenados",
        "El elemento es el propio destino"
      ]
    }
  ];

  const handleDiceRoll = (diceName, result, sides) => {
    const newResult = {
      diceName,
      result,
      sides,
      timestamp: new Date().toLocaleTimeString()
    };

    setCurrentResult(newResult);
    setRollHistory((prev) => [newResult, ...prev.slice(0, 4)]); // Mantener solo los √∫ltimos 5 resultados
  };

  return (
    <div className="dice-dashboard">
      <ResultDisplay currentResult={currentResult} />

      <div className="dice-grid">
        {diceData.map((dice) => (
          <DiceButton
            key={dice.id}
            name={dice.name}
            icon={dice.icon}
            items={dice.items}
            onRoll={handleDiceRoll}
          />
        ))}
      </div>

      {rollHistory.length > 0 && (
        <div className="roll-history">
          <h3>√öltimos resultados</h3>
          <div className="history-list">
            {rollHistory.map((roll, index) => (
              <div key={index} className="history-item">
                <span className="history-dice">{roll.diceName}</span>
                <span className="history-result">{roll.result}</span>
                <span className="history-time">{roll.timestamp}</span>
              </div>
            ))}
          </div>
        </div>
      )}
    </div>
  );
};

export default DiceDashboard;
